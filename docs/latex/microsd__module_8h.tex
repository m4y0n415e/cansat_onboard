\doxysection{src/\+microsd\+\_\+module.h File Reference}
\hypertarget{microsd__module_8h}{}\label{microsd__module_8h}\index{src/microsd\_module.h@{src/microsd\_module.h}}


Micro SD Card reader interface.  


{\ttfamily \+\#include $<$stdbool.\+h$>$}\newline
{\ttfamily \+\#include $<$stdio.\+h$>$}\newline
{\ttfamily \+\#include $<$stdint.\+h$>$}\newline
{\ttfamily \+\#include "{}pico/\+stdlib.\+h"{}}\newline
{\ttfamily \+\#include "{}atm\+\_\+sen\+\_\+module.\+h"{}}\newline
{\ttfamily \+\#include "{}time\+\_\+manager.\+h"{}}\newline
{\ttfamily \+\#include "{}gps\+\_\+module.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \doxymbox{\hyperlink{microsd__module_8h_ab4bbf5729374ada6cfc3fc3ae7635a4c}{sd\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em Initializes the Micro SD reader SPI connection and checks for successful mounting of the card. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{microsd__module_8h_a11853d053c03ae484ad6832fcda30b89}{save\+\_\+system\+\_\+data}} (\doxymbox{\hyperlink{structsensor__readings__t}{sensor\+\_\+readings\+\_\+t}} \texorpdfstring{$\ast$}{*}data, \doxymbox{\hyperlink{structcurrent__time__t}{current\+\_\+time\+\_\+t}} \texorpdfstring{$\ast$}{*}time)
\begin{DoxyCompactList}\small\item\em Saves all data collected from sensors onto the micro\+SD card in a \textquotesingle{}data\+\_\+log.\+txt\textquotesingle{} file. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{microsd__module_8h_a3f02e5000c59360a22796e685fd45e33}{save\+\_\+gps\+\_\+log}} (\doxymbox{\hyperlink{structgps__data__t}{gps\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}gps)
\begin{DoxyCompactList}\small\item\em Saves all GPS data onto the micro\+SD card in a \textquotesingle{}gps\+\_\+log.\+csv\textquotesingle{} file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Micro SD Card reader interface. 

This file handles the SD card reader SPI configuration for Pico using the no-\/\+OS-\/\+Fat\+FS-\/\+SD-\/\+SPI-\/\+RPi-\/\+Pico library, implements a function for saving data collected from other sensors, and saving GPS coordinates processed by the GPS module. \begin{DoxySeeAlso}{See also}
\href{https://github.com/carlk3/no-OS-FatFS-SD-SPI-RPi-Pico/tree/master}{\texttt{https:\+/\+/\+github.\+com/\+carlk3/\+no-\/\+OS-\/\+Fat\+FS-\/\+SD-\/\+SPI-\/\+RPi-\/\+Pico/\+tree/\+master}} for the SD driver documentation. 
\end{DoxySeeAlso}


\label{doc-func-members}
\Hypertarget{microsd__module_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{microsd__module_8h_a3f02e5000c59360a22796e685fd45e33}\index{microsd\_module.h@{microsd\_module.h}!save\_gps\_log@{save\_gps\_log}}
\index{save\_gps\_log@{save\_gps\_log}!microsd\_module.h@{microsd\_module.h}}
\doxysubsubsection{\texorpdfstring{save\_gps\_log()}{save\_gps\_log()}}
{\footnotesize\ttfamily \label{microsd__module_8h_a3f02e5000c59360a22796e685fd45e33} 
void save\+\_\+gps\+\_\+log (\begin{DoxyParamCaption}\item[{\doxymbox{\hyperlink{structgps__data__t}{gps\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{gps}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [extern]}}



Saves all GPS data onto the micro\+SD card in a \textquotesingle{}gps\+\_\+log.\+csv\textquotesingle{} file. 

It uses the functions available in the beforementioned library to save formatted strings with values read from the GPS kept in a \textquotesingle{}\doxylink{structgps__data__t}{gps\+\_\+data\+\_\+t}\textquotesingle{} structure onto the micro\+SD. 
\begin{DoxyParams}[1]{Parameters}
\doxymbox{\texttt{in}}  & {\em \doxylink{structgps__data__t}{gps\+\_\+data\+\_\+t}} & Pointer to a structure keeping data read from GPS and properly parsed. \\
\hline
\end{DoxyParams}
\Hypertarget{microsd__module_8h_a11853d053c03ae484ad6832fcda30b89}\index{microsd\_module.h@{microsd\_module.h}!save\_system\_data@{save\_system\_data}}
\index{save\_system\_data@{save\_system\_data}!microsd\_module.h@{microsd\_module.h}}
\doxysubsubsection{\texorpdfstring{save\_system\_data()}{save\_system\_data()}}
{\footnotesize\ttfamily \label{microsd__module_8h_a11853d053c03ae484ad6832fcda30b89} 
void save\+\_\+system\+\_\+data (\begin{DoxyParamCaption}\item[{\doxymbox{\hyperlink{structsensor__readings__t}{sensor\+\_\+readings\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{data}{, }\item[{\doxymbox{\hyperlink{structcurrent__time__t}{current\+\_\+time\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{time}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [extern]}}



Saves all data collected from sensors onto the micro\+SD card in a \textquotesingle{}data\+\_\+log.\+txt\textquotesingle{} file. 

It uses the functions available in the beforementioned library to save formatted strings with values read from sensors kept in a \textquotesingle{}\doxylink{structsensor__readings__t}{sensor\+\_\+readings\+\_\+t}\textquotesingle{} file onto the micro\+SD. 
\begin{DoxyParams}[1]{Parameters}
\doxymbox{\texttt{in}}  & {\em data} & Pointer to a \textquotesingle{}\doxylink{structsensor__readings__t}{sensor\+\_\+readings\+\_\+t}\textquotesingle{} data struct which stores the data to to be saved on the micro\+SD card. \\
\hline
\doxymbox{\texttt{in}}  & {\em time} & Pointer to a time-\/keeping structure that plays a role in time management for the timestamps in the \textquotesingle{}data\+\_\+log.\+txt\textquotesingle{} file. \\
\hline
\end{DoxyParams}
\Hypertarget{microsd__module_8h_ab4bbf5729374ada6cfc3fc3ae7635a4c}\index{microsd\_module.h@{microsd\_module.h}!sd\_init@{sd\_init}}
\index{sd\_init@{sd\_init}!microsd\_module.h@{microsd\_module.h}}
\doxysubsubsection{\texorpdfstring{sd\_init()}{sd\_init()}}
{\footnotesize\ttfamily \label{microsd__module_8h_ab4bbf5729374ada6cfc3fc3ae7635a4c} 
bool sd\+\_\+init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [extern]}}



Initializes the Micro SD reader SPI connection and checks for successful mounting of the card. 

\begin{DoxyReturn}{Returns}
true if the reader is correctly initialized and the micro\+SD card is mounted. 

false if the reader setup or the micro\+SD card mount fails. 
\end{DoxyReturn}
